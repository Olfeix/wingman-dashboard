{"ast":null,"code":"import _regeneratorRuntime from\"/home/olfeix/projects/wingman/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/olfeix/projects/wingman/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import LoginForm from\"../FormComponent/LoginForm/LoginForm\";import Grid from\"@material-ui/core/Grid\";import Container from\"@material-ui/core/Container\";import Avatar from\"@material-ui/core/Avatar\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import{makeStyles}from\"@material-ui/core/styles\";import{useToasts}from\"react-toast-notifications\";import{useHistory}from\"react-router-dom\";import LoginAPI from\"../../API/Login/login\";import{useAuth}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main}};});var Login=function Login(){var _useToasts=useToasts(),addToast=_useToasts.addToast;var _useAuth=useAuth(),setLoggedIn=_useAuth.setLoggedIn;var history=useHistory();var classes=useStyles();var submitProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values,setSubmitting){var resp,jwt,refresh_token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return LoginAPI(values);case 3:resp=_context.sent;if(resp){jwt=resp.jwt,refresh_token=resp.refresh_token;localStorage.setItem(\"bearerToken\",jwt);localStorage.setItem(\"refreshToken\",refresh_token);setLoggedIn(true);history.push(\"/\");addToast(\"Logged In Successfully\",{appearance:\"success\",autoDismiss:500});}setSubmitting(false);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setSubmitting(false);addToast(\"Error While Logged In\",{appearance:\"error\",autoDismiss:500});case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function submitProfile(_x,_x2){return _ref.apply(this,arguments);};}();var redirectToSignUp=function redirectToSignUp(){history.push(\"/sign-up\");};return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\",marginTop:\"5px\",marginBottom:\"5px\"},children:\"Sign In\"})]}),/*#__PURE__*/_jsx(LoginForm,{onSubmit:submitProfile}),/*#__PURE__*/_jsx(Grid,{container:true,style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(Grid,{item:true,onClick:redirectToSignUp,style:{cursor:\"pointer\"},children:\"Don't have an account? Sign Up\"})})]});};export default Login;","map":{"version":3,"names":["React","LoginForm","Grid","Container","Avatar","LockOutlinedIcon","makeStyles","useToasts","useHistory","LoginAPI","useAuth","jsx","_jsx","jsxs","_jsxs","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","Login","_useToasts","addToast","_useAuth","setLoggedIn","history","classes","submitProfile","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","setSubmitting","resp","jwt","refresh_token","wrap","_callee$","_context","prev","next","sent","localStorage","setItem","push","appearance","autoDismiss","t0","stop","_x","_x2","apply","arguments","redirectToSignUp","component","maxWidth","children","className","style","textAlign","marginBottom","onSubmit","container","justifyContent","item","onClick","cursor"],"sources":["/home/olfeix/projects/wingman/src/components/Login/Login.js"],"sourcesContent":["import React from \"react\";\nimport LoginForm from \"../FormComponent/LoginForm/LoginForm\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useToasts } from \"react-toast-notifications\";\nimport { useHistory } from \"react-router-dom\";\nimport LoginAPI from \"../../API/Login/login\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n}));\n\nconst Login = () => {\n  const { addToast } = useToasts();\n  const { setLoggedIn } = useAuth();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const submitProfile = async (values, setSubmitting) => {\n    try {\n      const resp = await LoginAPI(values);\n\n      if (resp) {\n        const { jwt, refresh_token } = resp;\n\n        localStorage.setItem(\"bearerToken\", jwt);\n        localStorage.setItem(\"refreshToken\", refresh_token);\n\n        setLoggedIn(true);\n\n        history.push(\"/\");\n\n        addToast(\"Logged In Successfully\", {\n          appearance: \"success\",\n          autoDismiss: 500,\n        });\n      }\n\n      setSubmitting(false);\n    } catch (e) {\n      setSubmitting(false);\n      addToast(\"Error While Logged In\", {\n        appearance: \"error\",\n        autoDismiss: 500,\n      });\n    }\n  };\n\n  const redirectToSignUp = () => {\n    history.push(\"/sign-up\");\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <h3\n          style={{ textAlign: \"center\", marginTop: \"5px\", marginBottom: \"5px\" }}\n        >\n          Sign In\n        </h3>\n      </div>\n      <LoginForm onSubmit={submitProfile} />\n\n      <Grid\n        container\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Grid item onClick={redirectToSignUp} style={{ cursor: \"pointer\" }}>\n          {\"Don't have an account? Sign Up\"}\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}